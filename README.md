# README

这是一个用于将大段代码分割成小段，并为每段代码添加注释的Python脚本。此脚本使用OpenAI的GPT-3引擎生成代码的中文注释。以下是脚本主要的工作流程：

1. 脚本首先设置OpenAI的API密钥，该密钥用于后续的API调用。

2. 获取当前的日期和时间，并将它们格式化为字符串。这个字符串被用于创建新的文件夹名。

3. 创建一个新的文件夹，该文件夹用于存放分割后的代码段。

4. 尝试使用不同的编码（utf-8, latin-1, cp1252）打开输入的代码文件。如果文件不能用某种编码打开，脚本会尝试下一个编码。

5. 脚本将读取的代码分割成多个部分，以便能够满足OpenAI API的token长度限制。默认情况下，每个部分最多包含1000个字符，但这个值可以自行修改。

6. 将每个部分的代码写入到新文件夹中的一个新的.txt文件中。

7. 选择OpenAI的模型引擎。默认的模型引擎是'text-davinci-003'。

8. 针对每一个代码部分，脚本会向OpenAI API发送一个请求，要求生成相应的代码注释。每个请求的结果会被添加到一个叫做`annotated_code`的字符串中。

9. 将添加了注释的代码写入一个新的输出文件中，文件名包含当前的时间。

10. 脚本完成后，会显示一个消息框，显示脚本运行所花费的时间。

**注意**：要运行这个脚本，你需要一个OpenAI的API密钥，并将其填入到脚本中的适当位置。

## 使用方法

1. 安装Python（版本3.6或以上）和所需的库（os, time, ctypes, openai, datetime）。

2. 在脚本中填入你的OpenAI API密钥。

3. 将你想要分割并注释的代码写入一个名为'code_in.txt'的文件中，然后放在与此脚本相同的文件夹中。

4. 运行这个脚本。脚本会自动创建一个新的文件夹，并将代码分割成多个部分，每个部分存放在一个单独的.txt文件中。然后，脚本会为每个部分的代码生成注释，并将注释后的代码写入一个新的输出文件中。

5. 查看脚本运行结果。结果会被写入一个带有当前时间的.txt文件中，并且脚本完成时会显示一个消息框，显示脚本运行所花费的时间。
